---
layout: post
author: funkatron
title: "Patching mnoGoSearch to generate valid XHTML"
url_title: patching_mnogosearch_to_generate_valid_xhtml
tags: ""
published: true
categories:
- The Web Problem
date: 2004-03-24
summary: 
old_entry_id: 1844
---
<p>At work we use <a href="http://www.mnogosearch.ru/">mnoGoSearch</a> to handle our sitewide search engine needs.  It&#8217;s a pretty powerful and flexible tool, but has a couple annoyances:</p>

<ol>
 <li>The documentation is uneven at best.</li>
 <li>Out of the box, the app can&#8217;t generate valid XHTML.</li>
</ol>

<p>The second one is what was annoying me today, because even after you clean up the example templates, it <em>still</em> insists on mucking up your code.  mnoGoSearch seems to rewrite some of the &lt;input&gt; tags is displays, making the &#8220;value&#8221; attribute uppercase, and forcing a space after every attribute/value combo inside the tag.  The latter is problematic because it treats the closing &#8220;/&#8221; in the &lt;input&gt; tag as an attribute, forcing a space after it.  Both of these behaviors ruin my finely tuned XHTML 1.1 transitional-valid code.</p>

<p>So, in a fit of open-source excitement, I decided to patch the code myself.  I&#8217;m definitely NOT a C programmer, but finding and patching the appropriate code was pretty straightforward.  The culprit is the TemplateTag function in the file template.c, which I&#8217;ve modified to do the following:</p>

<ol>
 <li>Write the &#8220;value&#8221; attribute as lowercase</li>
 <li>place the separating space <em>before</em> the attribute</li>
</ol>

<p>These changes get it to play nice with XHTML, and shouldn&#8217;t affect the search engine&#8217;s ability to generate valid HTML.</p>

<p>Since I&#8217;m not versed in the ways of diff and patch, I&#8217;ll just upload the whole file.  It gets interesting around line 335.</p>

<p><a href="/downloads/mnogosearch/template.c">Patched template.c</a> | <a href="/downloads/mnogosearch/template.c.html">Pretty coloriffic source</a> <em>generated by <a href="http://www.bedaux.net/cpp2html/">c++2html</a></em></p>

<p><strong>Edit:</strong> That first version didn&#8217;t really work.  This one does, though.</p>